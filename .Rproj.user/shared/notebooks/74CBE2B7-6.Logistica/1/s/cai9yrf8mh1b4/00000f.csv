"0","Ca=data.frame(COVID=Casos$COVID,PrimOla=Casos$PRIMERA_OLA...3,SegundOla=Casos$SEGUNDA_OLA...4)"
"0","Co=data.frame(COVID=0,PrimOla=Controls$PRIMERA_OLA...4,SegundOla=Controls$SEGUNDA_OLA...5)"
"0","#Edades madres"
"0","Ca$Edad=Casos$Edad._años_"
"0","Co$Edad=Controls$Edad._años_"
"0","Ca$Edad.cut=cut(Ca$Edad,breaks=c(0,30,40,100),labels=c(""≤30"",""31-40"","">40""))"
"0","Co$Edad.cut=cut(Co$Edad,breaks=c(0,30,40,100),labels=c(""≤30"",""31-40"","">40""))"
"0","#Etnia"
"0","Ca$Etnias=as.factor(Casos$Etnia)"
"0","Ca$Etnias=relevel(Ca$Etnias,""Blanca"")"
"0","Co$Etnias=Controls$Etnia"
"0","Co$Etnias[Co$Etnias==""Asiática""]=""Asia"""
"0","Co$Etnias=as.factor(Co$Etnia)"
"0","Co$Etnias=relevel(Co$Etnias,""Blanca"")"
"0",""
"0","#Tabaco"
"0","Ca$Fumadora=Casos$FUMADORA_CAT"
"0","Co$Fumadora=Controls$Fumadora_cat"
"0","#Obesidad"
"0","Ca$Obesidad=as.numeric(as.factor(Casos$Obesidad))-1"
"0","Co$Obesidad=as.numeric(as.factor(Controls$Obesidad))-1"
"0","#Hipertensión pregestacional"
"0","Ca$Hipertension.Pre=as.numeric(as.factor(Casos$Hipertensión.pregestacional))-1"
"0","Co$Hipertension.Pre=as.numeric(as.factor(Controls$Hipertensión.pregestacional))-1"
"0","#Diabetes"
"0","Ca$Diabetes=as.numeric(as.factor(Casos$DIABETES))-1"
"0","Co$Diabetes=as.numeric(as.factor(Controls$Diabetes))-1"
"0","#ECC"
"0","Ca$ECC=as.numeric(as.factor(Casos$Enfermedad.cardiaca.crónica))-1"
"0","Co$ECC=as.numeric(as.factor(Controls$ENF.CARDIACA.TODO))-1"
"0","#ECP no asma"
"0","Ca$ECPnoA=as.numeric(as.factor(Casos$Enfermedad.pulmonar.crónica.no.asma))-1"
"0","Co$ECPnoA=as.numeric(as.factor(Controls$Enfermedad.pulmonar.crónica.no.asma))-1"
"0","#Asma"
"0","Ca$Asma=as.numeric(as.factor(Casos$Diagnóstico.clínico.de.Asma))-1"
"0","Co$Asma=as.numeric(as.factor(Controls$Diagnóstico.clínico.de.Asma))-1"
"0","#ECP total"
"0","INA=Ca$ECPnoA"
"0","IA=Ca$Asma"
"0","I=rep(NA,length(INA))"
"0","for (i in 1:length(INA)){I[i]=max(INA[i],IA[i],na.rm=TRUE)}"
"0","Ca$ECP.Tot=I"
"0","NINA=Co$ECPnoA"
"0","NIA=Co$Asma"
"0","NI=rep(NA,length(NINA))"
"0","for (i in 1:length(NINA)){NI[i]=max(NINA[i],NIA[i],na.rm=TRUE)}"
"0","NI[NI==-Inf]=NA"
"0","Ca$ECP.Tot=I"
"0","Co$ECP.Tot=NI"
"0","#Nulipara"
"0","Ca$Nulipara=Casos$NULIPARA"
"0","Co$Nulipara=Controls$Nuliparous"
"0","#Gestacion multiple"
"0","Ca$GM=as.numeric(as.factor(Casos$Gestación.Múltiple))-1"
"0","Co$GM=as.numeric(as.factor(Controls$Gestación.Múltiple))-1"
"0","#Anomalia congenita"
"0","Ca$AnCon=as.numeric(as.factor(Casos$Diagnóstico.de.malformación.ecográfica._.semana.20._))-1"
"0","Co$AnCon=as.numeric(as.factor(Controls$Diagnóstico.de.malformación.ecográfica._.semana.20._))-1"
"0","#Retraso crecimiento"
"0","Ca$RetrasoCF=as.numeric(as.factor(Casos$Defecto.del.crecimiento.fetal..en.tercer.trimestre._.CIR._.))-1"
"0","Co$RetrasoCF=as.numeric(as.factor(Controls$Defecto.del.crecimiento.fetal..en.tercer.trimestre._.CIR._.))-1"
"0","#Diabetes gestacional"
"0","Ca$Diabetes.Gest=as.numeric(as.factor(Casos$Diabetes.gestacional))-1"
"0","Co$Diabetes.Gest=as.numeric(as.factor(Controls$Diabetes.gestacional))-1"
"0","#Hipertension gestacional"
"0","Ca$Hipertension.Gest=as.numeric(as.factor(Casos$Hipertensión.gestacional))-1"
"0","Co$Hipertension.Gest=as.numeric(as.factor(Controls$Hipertensión.gestacional))-1"
"0","#Preeclampsia"
"0","Ca$Preeclampsia=Casos$PREECLAMPSIA_ECLAMPSIA_TOTAL"
"0","Co$Preeclampsia=Controls$PREECLAMPSIA"
"0","#Preeclampsia grave"
"0","Ca$Preeclampsia.grave=as.numeric(as.factor(Casos$Preeclampsia.grave_HELLP_ECLAMPSIA))-1"
"0","NI1=Controls$preeclampsia_severa"
"0","NI2=Controls$Preeclampsia.grave.No.HELLP "
"0","NI=rep(NA,length(NI1))"
"0","for (i in 1:length(NI1)){NI[i]=max(NI1[i],NI2[i],na.rm=TRUE)}"
"0","Co$Preeclampsia.grave=as.numeric(as.factor(NI))-1"
"0","#Rotura prematura de bolsa"
"0","Ca$Rotura=as.numeric(as.factor(Casos$Bolsa.rota.anteparto))-1"
"0","Co$Rotura=as.numeric(as.factor(Controls$Bolsa.rota.anteparto))-1"
"0","#Edad gestacional en el momento del parto"
"0","Ca$EG.Parto=Casos$EG_TOTAL_PARTO"
"0","Co$EG.Parto=Controls$EDAD_GEST   "
"0","#UCI madre"
"0","Ca$UCI=Casos$UCI"
"0","Co$UCI=Controls$UCI...9"
"0","#UCI antes del parto"
"0","Ca$UCI.antes=abs(as.numeric(as.factor(Casos$UCI_ANTES.DESPUES.DEL.PARTO))-2)"
"0","Co$UCI.antes=NA"
"0","#Algún feto muerto intraútero"
"0","I=Casos$Feto.muerto.intraútero"
"0","I[I==""Sí""]=1"
"0","I[I==""No""]=0"
"0","Ca$FMI=I"
"0","NI1=Controls$Feto.vivo...194"
"0","NI1[NI1==""Sí""]=0"
"0","NI1[NI1==""No""]=1"
"0","NI2=Controls$Feto.vivo...245"
"0","NI2[NI2==""Sí""]=0"
"0","NI2[NI2==""No""]=1"
"0","NI=NI1"
"0","for (i in 1:length(NI1)){NI[i]=max(NI1[i],NI2[i],na.rm=TRUE)}"
"0","Co$FMI=NI"
"0","#Inicio de parto"
"0","Ca$Inicio.parto=Casos$Inicio.de.parto"
"0","Ca$Inicio.parto[Ca$Inicio.parto==""Cesárea""]=""Cesárea programada"""
"0","Ca$Inicio.parto=ordered(Ca$Inicio.parto,levels=c(""Espontáneo"",   ""Inducido"",""Cesárea programada""))"
"0","Co$Inicio.parto=ordered(Controls$Inicio.de.parto,levels=c(""Espontáneo"",   ""Inducido"",""Cesárea programada""))"
"0","#Tipo de parto"
"0","I.In=Casos$Inicio.de.parto"
"0","I.In[I.In==""Cesárea""]=""Cesárea programada"""
"0","I=Casos$Tipo.de.parto"
"0","I[I.In==""Cesárea programada""]=""Cesárea programada"""
"0","I[I==""Cesárea""]=""Cesárea urgente"""
"0","Ca$Tipo.parto=ordered(I,levels=c(""Eutocico"",""Instrumental"",""Cesárea programada"",    ""Cesárea urgente""))"
"0","NI.In=Controls$Inicio.de.parto"
"0","NI=Controls$Tipo.de.parto"
"0","NI[NI.In==""Cesárea programada""]=""Cesárea programada"""
"0","NI[NI==""Cesárea""]=""Cesárea urgente"""
"0","Co$Tipo.parto=ordered(NI,levels=c(""Eutocico"",""Instrumental"",""Cesárea programada"",    ""Cesárea urgente""))"
"0","#HPP"
"0","Ca$HPP=Casos$Hemorragia.postparto"
"0","Ca$HPPsino=Ca$HPP"
"0","Ca$HPPsino[!is.na(Ca$HPPsino)& Ca$HPPsino!=""No""]=""Sí"""
"0","Ca$HPP=ordered(Ca$HPP,levels=names(table(Ca$HPP))[c(4,2,3,1)])"
"0","Co$HPP=Controls$Hemorragia.postparto"
"0","Co$HPPsino=Co$HPP"
"0","Co$HPPsino[!is.na(Co$HPPsino)& Co$HPPsino!=""No""]=""Sí"""
"0","Co$HPP=ordered(Co$HPP,levels=names(table(Co$HPP))[c(4,2,3,1)])"
"0",""
"0","#Prematurez"
"0","Ca$Prematuro=Casos$PREMATURO"
"0","Co$Prematuro=Controls$Preterm.deliveries"
"0","#Eventos trombóticos"
"0","Ca$Event.Tromb=Casos$EVENTOS_TROMBO_TOTALES"
"0","NI1=Controls$DVT"
"0","NI2=Controls$PE"
"0","NI=rep(NA,length(NI1))"
"0","for (i in 1:length(NI1)){NI[i]=max(NI1[i],NI2[i],na.rm=TRUE)}"
"0","Co$Event.Tromb=NI"
"0","#Eventos hemorragicos"
"0","Ca$Event.Hem=Casos$EVENTOS_HEMORRAGICOS_TOTAL"
"0","Co$Event.Hem=Controls$eventos_hemorragicos"
"0","#Hemorragia postparto"
"0","I=Casos$Hemorragia.postparto"
"0","Ca$Hemo.PP=ordered(I,levels=names(table(I))[c(4,2,3,1)],labels=0:3)"
"0","NI=Controls$Hemorragia.postparto"
"0","Co$Hemo.PP=ordered(NI,levels=names(table(NI))[c(4,2,3,1)],labels=0:3)"
"0","#Algún hijo con APGAR.5<7"
"0","I=rep(0,dim(Casos)[1])"
"0","for(i in 1:dim(Casos)[1]){I[i]=min(Casos$APGAR.5...126[i],Casos$APGAR.5...150[i],na.rm=TRUE)}"
"0","I[I>10]=NA"
"0","I.cut=cut(I,breaks=c(-1,6,20),labels=c(1,0))"
"0","Ca$APGAR=I.cut"
"0","NI=rep(0,dim(Controls)[1])"
"0","for(i in 1:dim(Controls)[1]){I[i]=min(Controls$APGAR.5...200[i],Controls$APGAR.5...249[i],na.rm=TRUE)}"
"0","NI[NI>10]=NA"
"0","NI.cut=cut(NI,breaks=c(-1,6,20),labels=c(1,0))"
"0","Co$APGAR=NI.cut"
"0","#Algún hijo vivo en UCIN"
"0","Casos[Casos$Feto.muerto.intraútero==""Sí"",]$Ingreso.en.UCIN=NA"
"0","I=rep(0,dim(Casos)[1])"
"0","for(i in 1:dim(Casos)[1]){I[i]=max(Casos$Ingreso.en.UCIN[i],Casos$Ingreso.en.UCI[i],na.rm=TRUE)}"
"0","Ca$UCIN=as.numeric(as.factor(I))-1"
"0","Controls[Controls$Feto.vivo...194==""No"",]$Ingreso.en.UCI...213=NA"
"0","NI=rep(0,dim(Controls)[1])"
"0","for(i in 1:dim(Controls)[1]){NI[i]=max(Controls $Ingreso.en.UCI...213[i], Controls$Ingreso.en.UCI...260[i],na.rm=TRUE)}"
"0","Co$UCIN=as.numeric(as.factor(NI))-1"
"0","#Robson"
"0","Ca$Robson=Casos$Robson"
"0","Co$Robson=Controls$Robson"
"0","# Cesáreas"
"0","Ca$Cesárea=Casos$Cesárea"
"0","Co$Cesárea=Controls$Cesárea"
"0","#Sintomatología"
"0","Ca$Sint=Casos$SINTOMAS_CAT"
"0","Co$Sint=0"
"0","#Momento del diagnóstico"
"0","Ca$PreP=NA"
"0","Ca$PreP[round((Casos$EG_TOTAL_PARTO-Casos$EDAD.GEST.TOTAL)*7)>2]=""Anteparto""  "
"0","Ca$PreP[round((Casos$EG_TOTAL_PARTO-Casos$EDAD.GEST.TOTAL)*7)<=2]=""Periparto"""
"0","Co$PreP=""No"""
"0","#Sintomatología anteparto    "
"0","Ca$SintPre=Ca$Sint"
"0","Ca$SintPre[Ca$PreP==""Periparto""]=NA"
"0","Co$SintPre=0"
"0","#Sintomatología periparto"
"0","Ca$SintPeri=Ca$Sint"
"0","Ca$SintPeri[Ca$PreP==""Anteparto""]=NA"
"0","Co$SintPeri=0"
"0",""
"0","#Tabla global"
"0","DFL.madres=rbind(Ca,Co)"
"0","DFL.madres$PreP=factor(DFL.madres$PreP)"
"0","DFL.madres$SintPre=factor(DFL.madres$SintPre)"
"0","DFL.madres$SintPeri=factor(DFL.madres$SintPeri)"
"0","DFL.madres$PreP=relevel(DFL.madres$PreP,""No"")"
"0","DFL.madres$Sint=factor(DFL.madres$Sint)"
"0","DFL.madres$Cesárea=factor(DFL.madres$Cesárea)"
"0","DFL.madres$HPPsino=as.numeric(plyr::revalue(DFL.madres$HPPsino, c(""No""=0, ""Sí""=1)))"
"0",""
